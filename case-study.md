# Case-study оптимизации



## Проблема №1
Импорт данных на файле large.json занимает больше 10минут, нужно ускорить импорт, чтобы он проходил в пределах минуты.

- Метрика - время выполнения импорта 

## Подготовка
1. Логику импорта вынес в класс и написал тест

## Feedback-Loop
1. Профилирование
2. Изменение кода
3. Тесты
4. Постоение отчета

## Инструменты
- benchmark
- pg-hero

### Предварительный анализ
Время выполнения  на файле small: 11.822сек => 6.9сек

### Находка №1
- ![before](docs/profiling/1.png)
- Убрал запись сервисов автобусов из цикла, добавил хэш buses_services = { bus_id: service_ids }
- Время выполнения на файле small: снизилось 11.822сек =>  
- исправленная проблема перестала быть главной точкой роста


